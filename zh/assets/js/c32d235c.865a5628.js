"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[918],{991:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var t=i(4700);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}},1419:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"api/index","title":"API \u53c2\u8003","description":"\u672c\u8282\u63d0\u4f9b Contexify API \u7684\u53c2\u8003\u3002","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/api/index.md","sourceDirName":"api","slug":"/api/","permalink":"/contexify/zh/docs/api/","draft":false,"unlisted":false,"editUrl":"https://github.com/teomyth/contexify/edit/main/docs-site/docs/api/index.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"API Reference","permalink":"/contexify/zh/docs/category/api-reference"},"next":{"title":"API \u4f7f\u7528\u793a\u4f8b","permalink":"/contexify/zh/docs/api/examples"}}');var r=i(7968),s=i(991);const o={sidebar_position:1},c="API \u53c2\u8003",d={},l=[{value:"\u6838\u5fc3\u7c7b",id:"\u6838\u5fc3\u7c7b",level:2},{value:"Context",id:"context",level:3},{value:"Binding",id:"binding",level:3},{value:"ContextView",id:"contextview",level:3},{value:"\u88c5\u9970\u5668",id:"\u88c5\u9970\u5668",level:2},{value:"@injectable()",id:"injectable",level:3},{value:"@inject()",id:"inject",level:3},{value:"@inject.tag()",id:"injecttag",level:3},{value:"@inject.getter()",id:"injectgetter",level:3},{value:"@inject.view()",id:"injectview",level:3},{value:"@config()",id:"config",level:3},{value:"@intercept()",id:"intercept",level:3},{value:"\u63a5\u53e3",id:"\u63a5\u53e3",level:2},{value:"Provider",id:"provider",level:3},{value:"Interceptor",id:"interceptor",level:3},{value:"ContextObserver",id:"contextobserver",level:3},{value:"\u679a\u4e3e",id:"\u679a\u4e3e",level:2},{value:"BindingScope",id:"bindingscope",level:3},{value:"\u7c7b\u578b",id:"\u7c7b\u578b",level:2},{value:"Constructor",id:"constructor",level:3},{value:"ValueOrPromise",id:"valueorpromise",level:3},{value:"Getter",id:"getter",level:3},{value:"BindingFilter",id:"bindingfilter",level:3},{value:"BindingComparator",id:"bindingcomparator",level:3},{value:"\u66f4\u591a\u4fe1\u606f",id:"\u66f4\u591a\u4fe1\u606f",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"api-\u53c2\u8003",children:"API \u53c2\u8003"})}),"\n",(0,r.jsx)(n.p,{children:"\u672c\u8282\u63d0\u4f9b Contexify API \u7684\u53c2\u8003\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u6838\u5fc3\u7c7b",children:"\u6838\u5fc3\u7c7b"}),"\n",(0,r.jsx)(n.h3,{id:"context",children:"Context"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Context"})," \u7c7b\u662f Contexify \u6846\u67b6\u7684\u6838\u5fc3\u3002\u5b83\u4f5c\u4e3a\u7ed1\u5b9a\u7684\u6ce8\u518c\u8868\uff0c\u5e76\u63d0\u4f9b\u7ba1\u7406\u4f9d\u8d56\u9879\u7684\u65b9\u6cd5\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"class Context {\n  // Constructor\n  constructor(parent?: Context, name?: string);\n\n  // Binding methods\n  bind(key: string): Binding;\n  add(binding: Binding): this;\n  unbind(key: string): boolean;\n  contains(key: string): boolean;\n  \n  // Resolution methods\n  get<T>(key: string, options?: ResolutionOptions): Promise<T>;\n  getSync<T>(key: string, options?: ResolutionOptions): T;\n  getBinding(key: string): Binding | undefined;\n  find(pattern: string | RegExp): Promise<Binding[]>;\n  findByTag(tag: string): Promise<Binding[]>;\n  \n  // Configuration methods\n  configure(key: string): Binding;\n  getConfig<T>(key: string, options?: ResolutionOptions): Promise<T>;\n  \n  // Context view methods\n  createView<T>(filter: BindingFilter, comparator?: BindingComparator): ContextView<T>;\n  \n  // Observer methods\n  subscribe(observer: ContextEventObserver): this;\n  unsubscribe(observer: ContextEventObserver): boolean;\n  \n  // Event methods\n  on(event: string, listener: ContextEventListener): this;\n  once(event: string, listener: ContextEventListener): this;\n  off(event: string, listener: ContextEventListener): this;\n  \n  // Lifecycle methods\n  close(): void;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"binding",children:"Binding"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Binding"})," \u7c7b\u8868\u793a Context \u4e2d\u952e\u548c\u503c\u4e4b\u95f4\u7684\u8fde\u63a5\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"class Binding<T = unknown> {\n  // Static methods\n  static create<T>(key: string): Binding<T>;\n  \n  // Properties\n  readonly key: string;\n  readonly scope: BindingScope;\n  readonly tags: Set<string>;\n  readonly tagMap: { [tag: string]: unknown };\n  \n  // Binding methods\n  to(value: T): this;\n  toClass(ctor: Constructor<T>): this;\n  toDynamicValue(factory: (context: Context) => ValueOrPromise<T>): this;\n  toProvider(providerClass: Constructor<Provider<T>>): this;\n  toAlias(key: string): this;\n  \n  // Scope methods\n  inScope(scope: BindingScope): this;\n  \n  // Tag methods\n  tag(tag: string | { [tag: string]: unknown }): this;\n  tagMap(tagMap: { [tag: string]: unknown }): this;\n  \n  // Configuration methods\n  configure(key: string): Binding;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"contextview",children:"ContextView"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ContextView"})," \u7c7b\u5141\u8bb8\u60a8\u8ddf\u8e2a\u5339\u914d\u7279\u5b9a\u8fc7\u6ee4\u5668\u7684\u4e00\u7ec4\u7ed1\u5b9a\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"class ContextView<T> {\n  // Constructor\n  constructor(\n    context: Context,\n    filter: BindingFilter,\n    comparator?: BindingComparator\n  );\n  \n  // Methods\n  resolve(): Promise<T[]>;\n  values(): Promise<T[]>;\n  bindings(): Readonly<Binding>[];\n  \n  // Event methods\n  on(event: string, listener: Function): this;\n  once(event: string, listener: Function): this;\n  off(event: string, listener: Function): this;\n  \n  // Lifecycle methods\n  close(): void;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u88c5\u9970\u5668",children:"\u88c5\u9970\u5668"}),"\n",(0,r.jsx)(n.h3,{id:"injectable",children:"@injectable()"}),"\n",(0,r.jsx)(n.p,{children:"\u5c06\u7c7b\u6807\u8bb0\u4e3a\u53ef\u6ce8\u5165\uff0c\u5141\u8bb8 Contexify \u521b\u5efa\u5176\u5b9e\u4f8b\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function injectable(): ClassDecorator;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"inject",children:"@inject()"}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7\u7ed1\u5b9a\u952e\u6ce8\u5165\u4f9d\u8d56\u9879\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function inject(\n  bindingKey: string,\n  options?: InjectionOptions\n): ParameterDecorator & PropertyDecorator;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"injecttag",children:"@inject.tag()"}),"\n",(0,r.jsx)(n.p,{children:"\u6ce8\u5165\u5339\u914d\u7279\u5b9a\u6807\u7b7e\u7684\u6240\u6709\u4f9d\u8d56\u9879\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"namespace inject {\n  function tag(\n    tag: string,\n    options?: InjectionOptions\n  ): ParameterDecorator & PropertyDecorator;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"injectgetter",children:"@inject.getter()"}),"\n",(0,r.jsx)(n.p,{children:"\u6ce8\u5165\u4e00\u4e2a\u53ef\u4ee5\u7a0d\u540e\u7528\u4e8e\u83b7\u53d6\u4f9d\u8d56\u9879\u7684\u51fd\u6570\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"namespace inject {\n  function getter(\n    bindingKey: string,\n    options?: InjectionOptions\n  ): ParameterDecorator & PropertyDecorator;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"injectview",children:"@inject.view()"}),"\n",(0,r.jsx)(n.p,{children:"\u6ce8\u5165\u4e00\u4e2a\u8ddf\u8e2a\u5339\u914d\u8fc7\u6ee4\u5668\u7684\u7ed1\u5b9a\u7684 ContextView\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"namespace inject {\n  function view(\n    filter: BindingFilter,\n    options?: InjectionOptions\n  ): ParameterDecorator & PropertyDecorator;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"config",children:"@config()"}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u5f53\u524d\u7ed1\u5b9a\u6ce8\u5165\u914d\u7f6e\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function config(\n  propertyPath?: string | ConfigurationOptions\n): ParameterDecorator & PropertyDecorator;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"intercept",children:"@intercept()"}),"\n",(0,r.jsx)(n.p,{children:"\u5c06\u62e6\u622a\u5668\u5e94\u7528\u4e8e\u65b9\u6cd5\u6216\u7c7b\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function intercept(\n  ...interceptors: (Interceptor | Constructor<Interceptor>)[]\n): MethodDecorator & ClassDecorator;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u63a5\u53e3",children:"\u63a5\u53e3"}),"\n",(0,r.jsx)(n.h3,{id:"provider",children:"Provider"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Provider"})," \u63a5\u53e3\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53ef\u4ee5\u52a8\u6001\u521b\u5efa\u503c\u7684\u7c7b\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface Provider<T> {\n  value(): ValueOrPromise<T>;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"interceptor",children:"Interceptor"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Interceptor"})," \u63a5\u53e3\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53ef\u4ee5\u62e6\u622a\u65b9\u6cd5\u8c03\u7528\u7684\u7c7b\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface Interceptor {\n  intercept(\n    invocationCtx: InvocationContext,\n    next: () => ValueOrPromise<any>\n  ): ValueOrPromise<any>;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"contextobserver",children:"ContextObserver"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ContextObserver"})," \u63a5\u53e3\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53ef\u4ee5\u89c2\u5bdf\u4e0a\u4e0b\u6587\u4e8b\u4ef6\u7684\u7c7b\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface ContextObserver {\n  filter?: BindingFilter;\n  observe(\n    eventType: string,\n    binding: Readonly<Binding<unknown>>,\n    context: Context\n  ): ValueOrPromise<void>;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u679a\u4e3e",children:"\u679a\u4e3e"}),"\n",(0,r.jsx)(n.h3,{id:"bindingscope",children:"BindingScope"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"BindingScope"})," \u679a\u4e3e\u5b9a\u4e49\u4e86\u7ed1\u5b9a\u7684\u4f5c\u7528\u57df\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"enum BindingScope {\n  SINGLETON = 'singleton',\n  TRANSIENT = 'transient',\n  CONTEXT = 'context',\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u7c7b\u578b",children:"\u7c7b\u578b"}),"\n",(0,r.jsx)(n.h3,{id:"constructor",children:"Constructor"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Constructor"})," \u7c7b\u578b\u8868\u793a\u7c7b\u6784\u9020\u51fd\u6570\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type Constructor<T> = new (...args: any[]) => T;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"valueorpromise",children:"ValueOrPromise"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ValueOrPromise"})," \u7c7b\u578b\u8868\u793a\u503c\u6216\u503c\u7684 Promise\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type ValueOrPromise<T> = T | Promise<T>;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getter",children:"Getter"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Getter"})," \u7c7b\u578b\u8868\u793a\u8fd4\u56de\u503c\u6216\u503c\u7684 Promise \u7684\u51fd\u6570\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type Getter<T> = () => ValueOrPromise<T>;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bindingfilter",children:"BindingFilter"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"BindingFilter"})," \u7c7b\u578b\u8868\u793a\u8fc7\u6ee4\u7ed1\u5b9a\u7684\u51fd\u6570\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type BindingFilter = (binding: Readonly<Binding<unknown>>) => boolean;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bindingcomparator",children:"BindingComparator"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"BindingComparator"})," \u7c7b\u578b\u8868\u793a\u6bd4\u8f83\u7ed1\u5b9a\u7684\u51fd\u6570\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type BindingComparator = (a: Readonly<Binding<unknown>>, b: Readonly<Binding<unknown>>) => number;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u66f4\u591a\u4fe1\u606f",children:"\u66f4\u591a\u4fe1\u606f"}),"\n",(0,r.jsx)(n.p,{children:"\u6709\u5173 API \u7684\u66f4\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6e90\u4ee3\u7801\u4e2d\u7684 TypeScript \u5b9a\u4e49\u6216\u751f\u6210\u7684 API \u6587\u6863\u3002"})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);